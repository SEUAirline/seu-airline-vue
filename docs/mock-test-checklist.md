# Mock 数据测试清单

**测试时间:** 2025-10-23  
**测试目的:** 验证 vite-plugin-mock 配置是否正常工作

---

## ✅ 测试清单

### 准备工作
- [x] 安装 vite-plugin-mock 和 mockjs
- [x] 配置 vite.config.ts
- [x] 创建 Mock 文件（flight.ts, user.ts, order.ts）
- [x] 更新 API 调用代码
- [ ] 启动开发服务器

---

## 🧪 测试步骤

### 步骤 1: 启动开发服务器

```bash
cd c:\Users\67425\Desktop\SeuAirline\seu-airline-vue
npm run dev
```

**预期结果:**
- 服务器在 http://localhost:5173 启动
- 控制台显示 Mock 插件已加载
- 没有错误信息

---

### 步骤 2: 测试航班搜索

#### 2.1 访问首页
- 打开浏览器访问: `http://localhost:5173`
- 应该看到首页搜索表单

#### 2.2 填写搜索条件
- **出发地:** 北京
- **目的地:** 上海
- **出发日期:** 选择今天或明天
- **乘客数量:** 1
- **舱位:** 经济舱

#### 2.3 点击搜索
- 点击"搜索航班"按钮
- 应该跳转到 `/flight/search` 页面

#### 2.4 验证结果
**预期看到:**
- ✅ 顶部显示搜索条件摘要
- ✅ 左侧显示筛选栏
- ✅ 右侧显示航班列表（15-30个航班）
- ✅ 每个航班卡片包含完整信息
- ✅ 价格、时间、航空公司等信息正确显示

**打开开发者工具（F12）:**
1. 切换到 **Network** 标签
2. 找到请求: `search?departureCity=北京&arrivalCity=上海...`
3. 查看响应:
   - 状态码: 200
   - 响应数据包含航班数组
   - 每个航班有完整字段

---

### 步骤 3: 测试筛选功能

#### 3.1 价格筛选
- 拖动价格滑块调整范围
- **预期:** 航班列表实时更新，只显示价格在范围内的航班

#### 3.2 时间筛选
- 勾选"上午"时间段
- **预期:** 只显示上午起飞的航班

#### 3.3 航空公司筛选
- 勾选一个航空公司（如"中国国际航空"）
- **预期:** 只显示该航空公司的航班

#### 3.4 重置筛选
- 点击"重置筛选"按钮
- **预期:** 所有筛选条件清空，显示全部航班

---

### 步骤 4: 测试排序功能

选择不同的排序方式，验证结果:
- **价格从低到高** - 航班按价格升序排列
- **价格从高到低** - 航班按价格降序排列
- **起飞时间早到晚** - 航班按起飞时间升序排列

---

### 步骤 5: 测试分页功能

如果航班数量 > 10:
- 应该显示分页组件
- 点击"下一页"或页码
- **预期:** 显示对应页的航班，自动滚动到顶部

---

### 步骤 6: 测试用户登录（可选）

#### 6.1 访问登录页
- 访问: `http://localhost:5173/login`

#### 6.2 输入测试账号
- **用户名:** user001
- **密码:** 123456

#### 6.3 点击登录
- **预期:** 登录成功，跳转到首页
- **验证:** localStorage 中保存了 token 和用户信息

---

## 🔍 调试检查

### 检查 Mock 是否生效

打开浏览器控制台，执行:

```javascript
// 测试航班搜索 API
fetch('/api/v1/flight/search?departureCity=北京&arrivalCity=上海&departureDate=2025-10-24')
  .then(res => res.json())
  .then(data => console.log('航班数据:', data))

// 测试机场列表 API
fetch('/api/v1/airport/list')
  .then(res => res.json())
  .then(data => console.log('机场数据:', data))
```

**预期结果:**
- 返回正确格式的 JSON 数据
- code: 200
- success: true
- data 包含数组

---

## 📊 测试结果记录

### 航班搜索功能
- [ ] 搜索表单提交正常
- [ ] 跳转到搜索结果页
- [ ] 显示航班列表（15-30个）
- [ ] 航班数据完整（航班号、时间、价格等）
- [ ] 网络请求返回 200

### 筛选功能
- [ ] 价格筛选生效
- [ ] 时间筛选生效
- [ ] 航空公司筛选生效
- [ ] 重置功能正常

### 排序功能
- [ ] 价格排序正确
- [ ] 时间排序正确
- [ ] 排序后数据更新

### 分页功能
- [ ] 分页组件显示
- [ ] 翻页功能正常
- [ ] 数据范围正确

### Mock API
- [ ] /api/v1/flight/search 正常
- [ ] /api/v1/airport/list 正常
- [ ] 响应格式正确
- [ ] 数据类型匹配

---

## ❌ 常见问题排查

### 问题 1: 搜索后显示空白
**可能原因:**
- Mock 插件未启动
- API 路径不匹配
- 数据格式错误

**排查步骤:**
1. 检查控制台是否有错误
2. 查看 Network 标签，请求是否发送
3. 检查响应数据格式

### 问题 2: 显示"未找到符合条件的航班"
**可能原因:**
- Mock 数据生成失败
- 筛选条件过于严格

**排查步骤:**
1. 打开 Network 标签查看响应
2. 检查返回的航班数量
3. 尝试重置筛选条件

### 问题 3: 网络请求 404
**可能原因:**
- API 路径配置错误
- Mock 文件路径不对
- Vite 配置问题

**排查步骤:**
1. 检查 `vite.config.ts` 配置
2. 确认 Mock 文件在 `mock/` 目录下
3. 重启开发服务器

### 问题 4: TypeScript 类型错误
**可能原因:**
- Mock 数据类型与接口定义不匹配

**解决方案:**
- 检查 `mock/flight.ts` 中的数据结构
- 确保与 `src/types/flight.ts` 定义一致

---

## 🎯 测试通过标准

所有以下条件都满足，则测试通过:

1. ✅ 开发服务器正常启动
2. ✅ 航班搜索返回 15-30 个航班
3. ✅ 航班数据完整且格式正确
4. ✅ 筛选功能实时生效
5. ✅ 排序功能正确
6. ✅ 分页功能正常
7. ✅ 无控制台错误
8. ✅ 网络请求返回 200

---

## 📝 测试报告模板

```markdown
## Mock 数据测试报告

**测试人员:** [你的名字]
**测试时间:** 2025-10-23
**测试环境:** Windows 10 + Chrome

### 测试结果
- [ ] 航班搜索功能: 通过/失败
- [ ] 筛选功能: 通过/失败
- [ ] 排序功能: 通过/失败
- [ ] 分页功能: 通过/失败

### 发现的问题
1. [问题描述]
2. [问题描述]

### 截图
[粘贴测试截图]

### 结论
Mock 数据配置 [成功/需要修复]
```

---

## 🚀 测试完成后

如果测试通过:
1. ✅ Mock 配置成功
2. ✅ 可以开始开发其他功能
3. ✅ 继续开发航班预订功能

如果测试失败:
1. 📝 记录错误信息
2. 🔍 根据上面的排查步骤调试
3. 💬 如有问题，寻求帮助

---

**祝测试顺利！** 🎉
