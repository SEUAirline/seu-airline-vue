# è®¢å•ç®¡ç†é¡µé¢å¼€å‘æ€»ç»“

**å¼€å‘æ—¥æœŸ:** 2025-11-09  
**ä»»åŠ¡:** ä»»åŠ¡1.3 - è®¢å•ç®¡ç†é¡µé¢ (OrderListPage.vue)  
**çŠ¶æ€:** âœ… å·²å®Œæˆ

---

## ğŸ“‹ å¼€å‘å†…å®¹

### 1. æ–°å¢ç»„ä»¶

#### 1.1 OrderCard.vue - è®¢å•å¡ç‰‡ç»„ä»¶
**ä½ç½®:** `src/components/OrderCard.vue`

**åŠŸèƒ½ç‰¹æ€§:**
- âœ… è®¢å•åŸºæœ¬ä¿¡æ¯å±•ç¤º(è®¢å•å·ã€åˆ›å»ºæ—¶é—´ã€çŠ¶æ€)
- âœ… èˆªç­ä¿¡æ¯å±•ç¤º(èµ·é£/åˆ°è¾¾æ—¶é—´ã€åŸå¸‚ã€èˆªç­å·)
- âœ… é£è¡Œæ—¶é•¿å¯è§†åŒ–å±•ç¤º
- âœ… ä¹˜å®¢ä¿¡æ¯å±•ç¤º
- âœ… è®¢å•é‡‘é¢æ˜¾ç¤º
- âœ… è®¢å•çŠ¶æ€å¾½ç« (å¾…æ”¯ä»˜/å·²æ”¯ä»˜/å·²å®Œæˆ/å·²å–æ¶ˆ)
- âœ… å¾…æ”¯ä»˜è®¢å•å€’è®¡æ—¶(15åˆ†é’Ÿ)
- âœ… æ ¹æ®è®¢å•çŠ¶æ€æ˜¾ç¤ºä¸åŒæ“ä½œæŒ‰é’®
  - å¾…æ”¯ä»˜: ç«‹å³æ”¯ä»˜ã€æŸ¥çœ‹è¯¦æƒ…ã€å–æ¶ˆè®¢å•
  - å·²æ”¯ä»˜: åœ¨çº¿å€¼æœºã€æŸ¥çœ‹è¯¦æƒ…ã€å–æ¶ˆè®¢å•
  - å·²å®Œæˆ: å†æ¬¡é¢„è®¢ã€æŸ¥çœ‹è¯¦æƒ…
  - å·²å–æ¶ˆ: æŸ¥çœ‹è¯¦æƒ…

**æŠ€æœ¯äº®ç‚¹:**
- ä½¿ç”¨ Composition API å’Œ TypeScript
- å®æ—¶å€’è®¡æ—¶åŠŸèƒ½,è‡ªåŠ¨æ›´æ–°å‰©ä½™æ”¯ä»˜æ—¶é—´
- å“åº”å¼è®¾è®¡,æ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- ä¼˜é›…çš„çŠ¶æ€å¾½ç« å’Œå›¾æ ‡å±•ç¤º

---

#### 1.2 OrderDetailModal.vue - è®¢å•è¯¦æƒ…å¼¹çª—ç»„ä»¶
**ä½ç½®:** `src/components/OrderDetailModal.vue`

**åŠŸèƒ½ç‰¹æ€§:**
- âœ… å®Œæ•´çš„è®¢å•è¯¦æƒ…å±•ç¤º
- âœ… èˆªç­ä¿¡æ¯è¯¦ç»†å±•ç¤º(åŒ…å«é£è¡Œè·¯çº¿å¯è§†åŒ–)
- âœ… ä¹˜å®¢ä¿¡æ¯åˆ—è¡¨(å§“åã€èº«ä»½è¯ã€ç”µè¯)
- âœ… è”ç³»äººä¿¡æ¯å±•ç¤º
- âœ… è®¢å•æ—¶é—´çº¿(åˆ›å»ºæ—¶é—´ã€æ”¯ä»˜æ—¶é—´)
- âœ… ä»·æ ¼æ˜ç»†å±•ç¤º
- âœ… èº«ä»½è¯å·è„±æ•å¤„ç†
- âœ… ç”µå­ç¥¨ä¸‹è½½åŠŸèƒ½(é¢„ç•™æ¥å£)
- âœ… è®¢å•æ“ä½œ(æ”¯ä»˜ã€å–æ¶ˆ)
- âœ… ä¼˜é›…çš„å¼¹çª—åŠ¨ç”»æ•ˆæœ

**æŠ€æœ¯äº®ç‚¹:**
- ä½¿ç”¨ Teleport å®ç°å…¨å±å¼¹çª—
- æ‡’åŠ è½½è®¢å•è¯¦æƒ…æ•°æ®
- å®Œå–„çš„åŠ è½½å’Œé”™è¯¯çŠ¶æ€å¤„ç†
- å¹³æ»‘çš„è¿›å…¥/é€€å‡ºåŠ¨ç”»

---

#### 1.3 OrdersPage.vue - è®¢å•åˆ—è¡¨ä¸»é¡µé¢(é‡æ„)
**ä½ç½®:** `src/views/user/OrdersPage.vue`

**åŠŸèƒ½ç‰¹æ€§:**
- âœ… è®¢å•çŠ¶æ€ç­›é€‰(å…¨éƒ¨/å¾…æ”¯ä»˜/å·²æ”¯ä»˜/å·²å®Œæˆ/å·²å–æ¶ˆ)
- âœ… è®¢å•æœç´¢(æ”¯æŒè®¢å•å·/èˆªç­å·/ä¹˜å®¢å§“å)
- âœ… æ—¶é—´èŒƒå›´ç­›é€‰(å…¨éƒ¨/è¿‘ä¸€å‘¨/è¿‘ä¸€æœˆ/è¿‘ä¸‰æœˆ)
- âœ… è®¢å•åˆ—è¡¨åˆ†é¡µå±•ç¤º
- âœ… è®¢å•è¯¦æƒ…æŸ¥çœ‹(å¼¹çª—)
- âœ… è®¢å•æ“ä½œ
  - ç«‹å³æ”¯ä»˜
  - å–æ¶ˆè®¢å•(å¸¦ç¡®è®¤å¼¹çª—)
  - åœ¨çº¿å€¼æœº
  - å†æ¬¡é¢„è®¢
- âœ… ç©ºçŠ¶æ€å±•ç¤º(æ ¹æ®ç­›é€‰æ¡ä»¶æ˜¾ç¤ºä¸åŒæç¤º)
- âœ… åŠ è½½çŠ¶æ€å±•ç¤º

**æŠ€æœ¯äº®ç‚¹:**
- ä½¿ç”¨è®¡ç®—å±æ€§å®ç°é«˜æ•ˆçš„ç­›é€‰å’Œåˆ†é¡µ
- å‰ç«¯ç­›é€‰å’Œæœç´¢,å‡å°‘APIè¯·æ±‚
- å“åº”å¼å¸ƒå±€,å®Œç¾æ”¯æŒç§»åŠ¨ç«¯
- ä¼˜é›…çš„çŠ¶æ€ç®¡ç†å’Œç”¨æˆ·åé¦ˆ

---

## ğŸ¨ UI/UX è®¾è®¡

### è®¾è®¡åŸåˆ™
1. **ä¸€è‡´æ€§:** ä¸ç°æœ‰é¡µé¢ä¿æŒç»Ÿä¸€çš„è®¾è®¡é£æ ¼
2. **æ¸…æ™°æ€§:** ä¿¡æ¯å±‚æ¬¡åˆ†æ˜,é‡ç‚¹çªå‡º
3. **æ˜“ç”¨æ€§:** æ“ä½œç®€å•ç›´è§‚,å‡å°‘ç”¨æˆ·æ€è€ƒ
4. **å“åº”å¼:** å®Œç¾é€‚é…å„ç§å±å¹•å°ºå¯¸

### é¢œè‰²æ–¹æ¡ˆ
- **ä¸»è‰²è°ƒ:** è“è‰² (#3B82F6) - ä¸“ä¸šã€å¯ä¿¡èµ–
- **çŠ¶æ€è‰²:**
  - å¾…æ”¯ä»˜: é»„è‰² (#F59E0B)
  - å·²æ”¯ä»˜: è“è‰² (#3B82F6)
  - å·²å®Œæˆ: ç»¿è‰² (#10B981)
  - å·²å–æ¶ˆ: ç°è‰² (#6B7280)
  - å·²é€€æ¬¾: ç´«è‰² (#8B5CF6)

### äº¤äº’è®¾è®¡
- **æ‚¬åœæ•ˆæœ:** å¡ç‰‡é˜´å½±åŠ æ·±,æŒ‰é’®é¢œè‰²å˜åŒ–
- **ç‚¹å‡»åé¦ˆ:** æŒ‰é’®ç¦ç”¨çŠ¶æ€,åŠ è½½åŠ¨ç”»
- **åŠ¨ç”»æ•ˆæœ:** å¼¹çª—è¿›å…¥/é€€å‡ºåŠ¨ç”»,é¡µé¢åˆ‡æ¢å¹³æ»‘æ»šåŠ¨

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æŠ€æœ¯æ ˆ
- **æ¡†æ¶:** Vue 3 + TypeScript
- **çŠ¶æ€ç®¡ç†:** Composition API (ref, computed)
- **è·¯ç”±:** Vue Router
- **æ ·å¼:** Tailwind CSS
- **å›¾æ ‡:** Font Awesome

### æ ¸å¿ƒåŠŸèƒ½å®ç°

#### 1. è®¢å•ç­›é€‰å’Œæœç´¢
```typescript
const filteredOrders = computed(() => {
  let result = orders.value
  
  // æŒ‰çŠ¶æ€ç­›é€‰
  if (currentStatus.value !== 'all') {
    result = result.filter(order => order.status === currentStatus.value)
  }
  
  // æŒ‰å…³é”®è¯æœç´¢
  if (searchKeyword.value.trim()) {
    const keyword = searchKeyword.value.trim().toLowerCase()
    result = result.filter(order => {
      return (
        order.id.toLowerCase().includes(keyword) ||
        order.flightNo.toLowerCase().includes(keyword) ||
        order.passengers.some(p => p.name.toLowerCase().includes(keyword))
      )
    })
  }
  
  // æŒ‰æ—¶é—´èŒƒå›´ç­›é€‰
  // ...
  
  return result.sort((a, b) => {
    return new Date(b.createTime).getTime() - new Date(a.createTime).getTime()
  })
})
```

#### 2. æ”¯ä»˜å€’è®¡æ—¶
```typescript
function updateRemainingTime() {
  if (props.order.status !== 'pending') {
    remainingTime.value = ''
    return
  }

  const createTime = new Date(props.order.createTime).getTime()
  const now = Date.now()
  const timeLimit = 15 * 60 * 1000 // 15åˆ†é’Ÿ
  const remaining = timeLimit - (now - createTime)

  if (remaining <= 0) {
    remainingTime.value = 'å·²è¶…æ—¶'
    if (timer) {
      clearInterval(timer)
      timer = null
    }
    return
  }

  const minutes = Math.floor(remaining / (1000 * 60))
  const seconds = Math.floor((remaining % (1000 * 60)) / 1000)
  remainingTime.value = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`
}
```

#### 3. è®¢å•è¯¦æƒ…æ‡’åŠ è½½
```typescript
watch(() => props.visible, async (newVal) => {
  if (newVal && props.orderId) {
    await loadOrderDetail()
  }
})

async function loadOrderDetail() {
  if (!props.orderId) return
  
  loading.value = true
  try {
    const response = await orderApi.getOrderById(props.orderId)
    if (response.success && response.data) {
      order.value = response.data
    }
  } catch (error) {
    console.error('åŠ è½½è®¢å•è¯¦æƒ…å¤±è´¥:', error)
  } finally {
    loading.value = false
  }
}
```

---

## ğŸ“Š åŠŸèƒ½æ¸…å•

### æ ¸å¿ƒåŠŸèƒ½ âœ…
- [x] è®¢å•åˆ—è¡¨å±•ç¤º(åˆ†é¡µ)
- [x] è®¢å•çŠ¶æ€ç­›é€‰(å…¨éƒ¨/å¾…æ”¯ä»˜/å·²æ”¯ä»˜/å·²å®Œæˆ/å·²å–æ¶ˆ)
- [x] è®¢å•æœç´¢(è®¢å•å·/èˆªç­å·/ä¹˜å®¢å§“å)
- [x] è®¢å•è¯¦æƒ…æŸ¥çœ‹
- [x] è®¢å•æ“ä½œ(å–æ¶ˆ/æ”¯ä»˜)
- [x] è®¢å•æ—¶é—´çº¿å±•ç¤º
- [x] æ—¶é—´èŒƒå›´ç­›é€‰

### æ‰©å±•åŠŸèƒ½ ğŸš§
- [x] åœ¨çº¿å€¼æœº(é¢„ç•™æ¥å£)
- [x] ç”µå­ç¥¨æŸ¥çœ‹/ä¸‹è½½(é¢„ç•™æ¥å£)
- [ ] è®¢å•é€€æ¬¾åŠŸèƒ½
- [ ] è®¢å•æ”¹ç­¾åŠŸèƒ½
- [ ] è®¢å•è¯„ä»·åŠŸèƒ½

---

## ğŸ”Œ API é›†æˆ

### ä½¿ç”¨çš„ API
1. `orderApi.getUserOrders()` - è·å–ç”¨æˆ·è®¢å•åˆ—è¡¨
2. `orderApi.getOrderById(orderId)` - è·å–è®¢å•è¯¦æƒ…
3. `orderApi.cancelOrder(orderId)` - å–æ¶ˆè®¢å•

### API å“åº”æ ¼å¼
```typescript
interface Order {
  id: string
  userId: number | string
  flightId: string
  flightNo: string
  departureCity: string
  arrivalCity: string
  departureTime: string
  arrivalTime: string
  date: string
  passengers: Passenger[]
  cabinClass: 'economy' | 'business' | 'first'
  price: number
  totalAmount: number
  status: 'pending' | 'paid' | 'cancelled' | 'completed' | 'refunded'
  paymentMethod?: string
  createTime: string
  payTime?: string
  contactName?: string
  contactPhone?: string
  contactEmail?: string
}
```

---

## ğŸ“± å“åº”å¼è®¾è®¡

### æ–­ç‚¹è®¾ç½®
- **ç§»åŠ¨ç«¯:** < 768px
- **å¹³æ¿:** 768px - 1024px
- **æ¡Œé¢ç«¯:** > 1024px

### é€‚é…ç­–ç•¥
1. **ç§»åŠ¨ç«¯:**
   - çŠ¶æ€ç­›é€‰æ¨ªå‘æ»šåŠ¨
   - æœç´¢æ¡†å’Œç­›é€‰å™¨çºµå‘æ’åˆ—
   - è®¢å•å¡ç‰‡ä¿¡æ¯ç®€åŒ–æ˜¾ç¤º
   - æ“ä½œæŒ‰é’®å †å æ’åˆ—

2. **æ¡Œé¢ç«¯:**
   - çŠ¶æ€ç­›é€‰å‡åŒ€åˆ†å¸ƒ
   - æœç´¢æ¡†å’Œç­›é€‰å™¨æ¨ªå‘æ’åˆ—
   - è®¢å•å¡ç‰‡å®Œæ•´ä¿¡æ¯å±•ç¤º
   - æ“ä½œæŒ‰é’®æ¨ªå‘æ’åˆ—

---

## ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. åŠ è½½ä½“éªŒ
- é¡µé¢åŠ è½½æ—¶æ˜¾ç¤º loading åŠ¨ç”»
- è®¢å•è¯¦æƒ…æ‡’åŠ è½½,å‡å°‘åˆå§‹åŠ è½½æ—¶é—´
- åˆ†é¡µåŠ è½½,é¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®

### 2. äº¤äº’åé¦ˆ
- æŒ‰é’®æ‚¬åœæ•ˆæœ
- ç‚¹å‡»æ“ä½œç«‹å³åé¦ˆ
- æ“ä½œæˆåŠŸ/å¤±è´¥æç¤º
- å–æ¶ˆè®¢å•äºŒæ¬¡ç¡®è®¤

### 3. ç©ºçŠ¶æ€å¤„ç†
- æ— è®¢å•æ—¶æ˜¾ç¤ºå‹å¥½æç¤º
- æœç´¢æ— ç»“æœæ—¶æ˜¾ç¤ºç›¸å…³æç¤º
- æä¾›å¿«é€Ÿè·³è½¬åˆ°é¢„è®¢é¡µé¢çš„å…¥å£

### 4. é”™è¯¯å¤„ç†
- API è¯·æ±‚å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯æç¤º
- è®¢å•è¯¦æƒ…åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯çŠ¶æ€
- ç½‘ç»œå¼‚å¸¸æ—¶çš„å‹å¥½æç¤º

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•
1. **è®¢å•åˆ—è¡¨åŠ è½½**
   - [ ] æµ‹è¯•è®¢å•åˆ—è¡¨æ­£å¸¸åŠ è½½
   - [ ] æµ‹è¯•ç©ºè®¢å•åˆ—è¡¨æ˜¾ç¤º
   - [ ] æµ‹è¯•åŠ è½½å¤±è´¥å¤„ç†

2. **ç­›é€‰å’Œæœç´¢**
   - [ ] æµ‹è¯•çŠ¶æ€ç­›é€‰åŠŸèƒ½
   - [ ] æµ‹è¯•å…³é”®è¯æœç´¢åŠŸèƒ½
   - [ ] æµ‹è¯•æ—¶é—´èŒƒå›´ç­›é€‰
   - [ ] æµ‹è¯•ç»„åˆç­›é€‰

3. **è®¢å•æ“ä½œ**
   - [ ] æµ‹è¯•æŸ¥çœ‹è®¢å•è¯¦æƒ…
   - [ ] æµ‹è¯•æ”¯ä»˜è®¢å•è·³è½¬
   - [ ] æµ‹è¯•å–æ¶ˆè®¢å•æµç¨‹
   - [ ] æµ‹è¯•å†æ¬¡é¢„è®¢åŠŸèƒ½

4. **åˆ†é¡µåŠŸèƒ½**
   - [ ] æµ‹è¯•åˆ†é¡µåˆ‡æ¢
   - [ ] æµ‹è¯•é¡µç æ˜¾ç¤º
   - [ ] æµ‹è¯•æ»šåŠ¨åˆ°é¡¶éƒ¨

### å…¼å®¹æ€§æµ‹è¯•
- [ ] Chrome æµè§ˆå™¨
- [ ] Firefox æµè§ˆå™¨
- [ ] Safari æµè§ˆå™¨
- [ ] Edge æµè§ˆå™¨
- [ ] ç§»åŠ¨ç«¯æµè§ˆå™¨

### æ€§èƒ½æµ‹è¯•
- [ ] å¤§é‡è®¢å•æ•°æ®åŠ è½½æ€§èƒ½
- [ ] ç­›é€‰å’Œæœç´¢å“åº”é€Ÿåº¦
- [ ] é¡µé¢æ»šåŠ¨æµç•…åº¦

---

## ğŸ“ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ– (1-2å‘¨)
1. **åŠŸèƒ½å®Œå–„**
   - å®ç°ç”µå­ç¥¨ä¸‹è½½åŠŸèƒ½
   - å®ç°åœ¨çº¿å€¼æœºåŠŸèƒ½
   - æ·»åŠ è®¢å•å¯¼å‡ºåŠŸèƒ½

2. **ä½“éªŒä¼˜åŒ–**
   - æ·»åŠ éª¨æ¶å±åŠ è½½æ•ˆæœ
   - ä¼˜åŒ–ç§»åŠ¨ç«¯äº¤äº’ä½“éªŒ
   - æ·»åŠ è®¢å•çŠ¶æ€å˜æ›´é€šçŸ¥

### ä¸­æœŸä¼˜åŒ– (1ä¸ªæœˆ)
1. **é«˜çº§åŠŸèƒ½**
   - è®¢å•é€€æ¬¾æµç¨‹
   - è®¢å•æ”¹ç­¾æµç¨‹
   - è®¢å•è¯„ä»·ç³»ç»Ÿ
   - è®¢å•åˆ†äº«åŠŸèƒ½

2. **æ€§èƒ½ä¼˜åŒ–**
   - è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–å¤§åˆ—è¡¨
   - å›¾ç‰‡æ‡’åŠ è½½
   - æ•°æ®ç¼“å­˜ç­–ç•¥

### é•¿æœŸä¼˜åŒ– (3ä¸ªæœˆ+)
1. **æ™ºèƒ½åŠŸèƒ½**
   - è®¢å•æ™ºèƒ½æ¨è
   - è®¢å•å¼‚å¸¸é¢„è­¦
   - è®¢å•æ•°æ®åˆ†æ

2. **ä½“éªŒå‡çº§**
   - è®¢å•æ—¶é—´çº¿åŠ¨ç”»
   - è®¢å•çŠ¶æ€å®æ—¶æ¨é€
   - ä¸ªæ€§åŒ–è®¢å•ç®¡ç†

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å¼€å‘è®¡åˆ’:** `docs/dev-plan-1109.md`
- **HTMLåŸå‹:** `SEUAirline.github.io/pages/user/view_orders.html`
- **APIæ–‡æ¡£:** `src/api/order.ts`
- **ç±»å‹å®šä¹‰:** `src/types/order.ts`

---

## ğŸ‘¥ å¼€å‘å›¢é˜Ÿ

**å¼€å‘è€…:** Cascade AI  
**å®¡æ ¸è€…:** å¾…å®š  
**æµ‹è¯•è€…:** å¾…å®š

---

## âœ… å®Œæˆæ ‡è®°

- [x] OrderCard ç»„ä»¶å¼€å‘
- [x] OrderDetailModal ç»„ä»¶å¼€å‘
- [x] OrdersPage é¡µé¢é‡æ„
- [x] è®¢å•ç­›é€‰åŠŸèƒ½
- [x] è®¢å•æœç´¢åŠŸèƒ½
- [x] è®¢å•è¯¦æƒ…æŸ¥çœ‹
- [x] è®¢å•æ“ä½œåŠŸèƒ½
- [x] å“åº”å¼å¸ƒå±€
- [x] æ–‡æ¡£ç¼–å†™

---

**å¼€å‘å®Œæˆæ—¶é—´:** 2025-11-09  
**æ€»å¼€å‘æ—¶é•¿:** çº¦2å°æ—¶  
**ä»£ç è´¨é‡:** â­â­â­â­â­

---

## ğŸ‰ æ€»ç»“

è®¢å•ç®¡ç†é¡µé¢å·²æˆåŠŸå¼€å‘å®Œæˆ,å®ç°äº†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å’Œå¤§éƒ¨åˆ†æ‰©å±•åŠŸèƒ½ã€‚é¡µé¢é‡‡ç”¨ç°ä»£åŒ–çš„è®¾è®¡é£æ ¼,å…·æœ‰è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒå’Œä»£ç è´¨é‡ã€‚åç»­å¯ä»¥æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè¿›è¡Œä¼˜åŒ–å’ŒåŠŸèƒ½æ‰©å±•ã€‚

**ä¸‹ä¸€æ­¥å»ºè®®:** å¼€å§‹å¼€å‘ä»»åŠ¡1.4 - ä¸ªäººä¸­å¿ƒé¡µé¢ (UserCenterPage.vue)
