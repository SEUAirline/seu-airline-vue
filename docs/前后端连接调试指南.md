# SEUAirline å‰åç«¯è¿æ¥è°ƒè¯•æŒ‡å—

**åˆ›å»ºæ—¶é—´:** 2025-11-11  
**çŠ¶æ€:** ğŸš€ è¿›è¡Œä¸­

---

## ğŸ“‹ å‰ç½®å‡†å¤‡æ£€æŸ¥æ¸…å•

### âœ… åç«¯å‡†å¤‡

1. **MySQL æœåŠ¡**
   - [ ] MySQL 8.0+ å·²å®‰è£…å¹¶å¯åŠ¨
   - [ ] æ•°æ®åº“ `seu_airline` å·²åˆ›å»º
   - [ ] é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®åº“å¯†ç æ­£ç¡®

2. **Redis æœåŠ¡** âš ï¸ **å¿…éœ€**
   - [ ] Redis 6.0+ å·²å®‰è£…å¹¶å¯åŠ¨
   - [ ] éªŒè¯å‘½ä»¤: `redis-cli ping` (åº”è¿”å› PONG)

3. **åç«¯åº”ç”¨**
   - [ ] JDK 11+ å·²å®‰è£…
   - [ ] Maven 3.6+ å·²å®‰è£…
   - [ ] åç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:8080`

### âœ… å‰ç«¯å‡†å¤‡

1. **ç¯å¢ƒé…ç½®**
   - [ ] Node.js 16+ å·²å®‰è£…
   - [ ] ä¾èµ–å·²å®‰è£…: `npm install`
   - [ ] `.env.development` ä¸­ `VITE_USE_MOCK=false`

2. **ä»£ç†é…ç½®**
   - [ ] `vite.config.ts` ä¸­çš„ proxy é…ç½®æ­£ç¡®
   - [ ] åç«¯åœ°å€: `http://localhost:8080`

---

## ğŸš€ å¯åŠ¨æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨ MySQL

```bash
# Windows: ç¡®ä¿ MySQL æœåŠ¡å·²å¯åŠ¨
# æœåŠ¡ç®¡ç†å™¨ä¸­å¯åŠ¨ MySQL80 æœåŠ¡

# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œ
net start MySQL80
```

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨ Redis âš ï¸

```bash
# Windows
redis-server

# éªŒè¯
redis-cli ping
# åº”è¿”å›: PONG
```

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨åç«¯æœåŠ¡

```bash
cd seu-airline-backend

# æ–¹å¼1: ä½¿ç”¨ Maven
mvn spring-boot:run

# æ–¹å¼2: æ‰“åŒ…åè¿è¡Œ
mvn clean package
java -jar target/seu-airline-backend-1.0.0.jar
```

**éªŒè¯åç«¯å¯åŠ¨æˆåŠŸ:**
- æ§åˆ¶å°æ˜¾ç¤º: `Started SeuAirlineBackendApplication`
- è®¿é—®: http://localhost:8080/api/swagger-ui/
- æµ‹è¯•: http://localhost:8080/api/airport/list

### ç¬¬å››æ­¥ï¼šå¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd seu-airline-vue

# ç¡®ä¿ Mock å·²å…³é—­
# .env.development ä¸­: VITE_USE_MOCK=false

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

**éªŒè¯å‰ç«¯å¯åŠ¨æˆåŠŸ:**
- æ§åˆ¶å°æ˜¾ç¤º: `Local: http://localhost:5173/`
- æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€
- æ§åˆ¶å°æ˜¾ç¤º: `useMock: false`

---

## ğŸ” API æ¥å£å¯¹ç…§è¡¨

### è®¤è¯æ¥å£

| åŠŸèƒ½ | å‰ç«¯è°ƒç”¨ | åç«¯æ¥å£ | çŠ¶æ€ |
|------|---------|---------|------|
| ç”¨æˆ·ç™»å½• | `userApi.login()` | `POST /auth/login` | âœ… |
| ç”¨æˆ·æ³¨å†Œ | `userApi.register()` | `POST /auth/register` | âœ… |
| è·å–å½“å‰ç”¨æˆ· | - | `GET /auth/me` | âœ… |
| ç”¨æˆ·ç™»å‡º | - | `POST /auth/logout` | â³ |
| åˆ·æ–°Token | - | `POST /auth/refresh` | â³ |

### èˆªç­æ¥å£

| åŠŸèƒ½ | å‰ç«¯è°ƒç”¨ | åç«¯æ¥å£ | çŠ¶æ€ |
|------|---------|---------|------|
| æœç´¢èˆªç­ | `flightApi.searchFlights()` | `GET /flight/search` | âœ… |
| è·å–èˆªç­è¯¦æƒ… | `flightApi.getFlightById()` | `GET /flight/{id}` | âœ… |
| å³å°†èµ·é£èˆªç­ | - | `GET /flight/upcoming` | âœ… |
| æŒ‰èˆªç­å·æŸ¥è¯¢ | - | `GET /flight/number/{flightNumber}` | âœ… |

### æœºåœºæ¥å£

| åŠŸèƒ½ | å‰ç«¯è°ƒç”¨ | åç«¯æ¥å£ | çŠ¶æ€ |
|------|---------|---------|------|
| è·å–æœºåœºåˆ—è¡¨ | `flightApi.getAirports()` | `GET /airport/list` | âœ… |
| æŒ‰ä»£ç è·å–æœºåœº | - | `GET /airport/{code}` | âœ… |

### è®¢å•æ¥å£

| åŠŸèƒ½ | å‰ç«¯è°ƒç”¨ | åç«¯æ¥å£ | çŠ¶æ€ |
|------|---------|---------|------|
| åˆ›å»ºè®¢å• | `orderApi.createOrder()` | `POST /order/create` | â³ |
| è·å–è®¢å•åˆ—è¡¨ | `orderApi.getOrders()` | `GET /order/list` | â³ |
| è·å–è®¢å•è¯¦æƒ… | `orderApi.getOrderById()` | `GET /order/{id}` | â³ |

---

## ğŸ› å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: è·¨åŸŸé”™è¯¯ (CORS)

**é”™è¯¯ä¿¡æ¯:**
```
Access to XMLHttpRequest at 'http://localhost:8080/api/...' from origin 'http://localhost:5173' has been blocked by CORS policy
```

**åŸå› :** åç«¯æœªæ­£ç¡®é…ç½® CORS

**è§£å†³æ–¹æ¡ˆ:**
åç«¯ Controller å·²æ·»åŠ  `@CrossOrigin(origins = "*", maxAge = 3600)`ï¼Œåº”è¯¥ä¸ä¼šå‡ºç°æ­¤é—®é¢˜ã€‚

### é—®é¢˜2: è¿æ¥è¢«æ‹’ç»

**é”™è¯¯ä¿¡æ¯:**
```
ERR_CONNECTION_REFUSED
```

**åŸå› :** åç«¯æœåŠ¡æœªå¯åŠ¨

**è§£å†³æ–¹æ¡ˆ:**
1. æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥ç«¯å£ 8080 æ˜¯å¦è¢«å ç”¨
3. æŸ¥çœ‹åç«¯æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### é—®é¢˜3: Redis è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯:**
```
Unable to connect to Redis
Connection refused: localhost/127.0.0.1:6379
```

**è§£å†³æ–¹æ¡ˆ:**
```bash
# å¯åŠ¨ Redis
redis-server

# éªŒè¯
redis-cli ping
```

### é—®é¢˜4: 401 æœªæˆæƒ

**é”™è¯¯ä¿¡æ¯:**
```
401 Unauthorized
```

**åŸå› :** Token è¿‡æœŸæˆ–æ— æ•ˆ

**è§£å†³æ–¹æ¡ˆ:**
1. é‡æ–°ç™»å½•è·å–æ–° Token
2. æ£€æŸ¥ localStorage ä¸­çš„ token
3. æ£€æŸ¥è¯·æ±‚å¤´ä¸­çš„ Authorization

### é—®é¢˜5: æ•°æ®æ ¼å¼ä¸åŒ¹é…

**ç—‡çŠ¶:** å‰ç«¯æ— æ³•æ­£ç¡®è§£æåç«¯æ•°æ®

**æ£€æŸ¥ç‚¹:**
1. åç«¯å“åº”æ ¼å¼: `{success, data, message}`
2. å‰ç«¯ç±»å‹å®šä¹‰: `ApiResponse<T>`
3. å­—æ®µåç§°æ˜¯å¦ä¸€è‡´ï¼ˆé©¼å³°å‘½åï¼‰

---

## ğŸ“ å“åº”æ ¼å¼è§„èŒƒ

### åç«¯å“åº”æ ¼å¼

```java
// æˆåŠŸå“åº”
{
  "success": true,
  "data": { ... },
  "message": "æ“ä½œæˆåŠŸ"
}

// å¤±è´¥å“åº”
{
  "success": false,
  "data": null,
  "message": "é”™è¯¯ä¿¡æ¯"
}
```

### å‰ç«¯ç±»å‹å®šä¹‰

```typescript
interface ApiResponse<T = any> {
  success: boolean
  data?: T
  message?: string
  code?: number
}
```

---

## ğŸ”§ è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·

**Network æ ‡ç­¾:**
- æŸ¥çœ‹è¯·æ±‚ URL
- æ£€æŸ¥è¯·æ±‚å¤´ï¼ˆAuthorizationï¼‰
- æŸ¥çœ‹å“åº”çŠ¶æ€ç 
- æ£€æŸ¥å“åº”æ•°æ®æ ¼å¼

**Console æ ‡ç­¾:**
- æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
- ä½¿ç”¨ `console.log` æ‰“å°æ•°æ®

### 2. åç«¯æ—¥å¿—

æŸ¥çœ‹åç«¯æ§åˆ¶å°è¾“å‡ºï¼š
- è¯·æ±‚è·¯å¾„
- å‚æ•°ä¿¡æ¯
- å¼‚å¸¸å †æ ˆ

### 3. API æµ‹è¯•å·¥å…·

ä½¿ç”¨ Postman æˆ– curl æµ‹è¯•æ¥å£ï¼š

```bash
# æµ‹è¯•ç™»å½•
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# æµ‹è¯•æœºåœºåˆ—è¡¨
curl http://localhost:8080/api/airport/list
```

---

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

### åŸºç¡€åŠŸèƒ½æµ‹è¯•

- [ ] ç”¨æˆ·æ³¨å†Œ
- [ ] ç”¨æˆ·ç™»å½•
- [ ] Token è‡ªåŠ¨æ·»åŠ åˆ°è¯·æ±‚å¤´
- [ ] 401 è‡ªåŠ¨è·³è½¬ç™»å½•é¡µ

### èˆªç­åŠŸèƒ½æµ‹è¯•

- [ ] è·å–æœºåœºåˆ—è¡¨
- [ ] æœç´¢èˆªç­
- [ ] æŸ¥çœ‹èˆªç­è¯¦æƒ…

### è®¢å•åŠŸèƒ½æµ‹è¯•

- [ ] åˆ›å»ºè®¢å•
- [ ] æŸ¥çœ‹è®¢å•åˆ—è¡¨
- [ ] æŸ¥çœ‹è®¢å•è¯¦æƒ…

---

## ğŸ“Š å½“å‰è¿›åº¦

### å·²å®Œæˆ âœ…

- [x] ç¯å¢ƒé…ç½®æ–‡ä»¶åˆ›å»º
- [x] Mock å¼€å…³é…ç½®
- [x] Vite ä»£ç†é…ç½®
- [x] API å“åº”æ ¼å¼ç»Ÿä¸€
- [x] å‰ç«¯ç±»å‹å®šä¹‰

### è¿›è¡Œä¸­ ğŸš€

- [ ] å¯åŠ¨åç«¯æœåŠ¡
- [ ] æµ‹è¯•åŸºç¡€ API
- [ ] ä¿®å¤å‘ç°çš„é—®é¢˜

### å¾…å®Œæˆ â³

- [ ] è®¢å• API å¯¹æ¥
- [ ] æ”¯ä»˜ API å¯¹æ¥
- [ ] ç®¡ç†å‘˜ API å¯¹æ¥
- [ ] WebSocket å®æ—¶é€šä¿¡

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **å¯åŠ¨åç«¯æœåŠ¡**
   - ç¡®è®¤ MySQL å’Œ Redis å·²è¿è¡Œ
   - å¯åŠ¨ Spring Boot åº”ç”¨

2. **æµ‹è¯•åŸºç¡€åŠŸèƒ½**
   - æµ‹è¯•ç”¨æˆ·æ³¨å†Œ/ç™»å½•
   - æµ‹è¯•æœºåœºåˆ—è¡¨è·å–
   - æµ‹è¯•èˆªç­æœç´¢

3. **ä¿®å¤é—®é¢˜**
   - è®°å½•é‡åˆ°çš„é—®é¢˜
   - é€ä¸ªè°ƒè¯•è§£å†³
   - æ›´æ–°æ­¤æ–‡æ¡£

4. **å®Œå–„åŠŸèƒ½**
   - è¡¥å……ç¼ºå¤±çš„ API
   - ä¼˜åŒ–é”™è¯¯å¤„ç†
   - æ”¹è¿›ç”¨æˆ·ä½“éªŒ

---

**æ–‡æ¡£ç»´æŠ¤è€…:** SEUAirline å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°:** 2025-11-11  
**çŠ¶æ€:** ğŸŸ¢ æ´»è·ƒå¼€å‘ä¸­
