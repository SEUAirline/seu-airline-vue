# SEUAirline 备注文档

**文档说明:** 本文档包含项目的参考资料、设计文档、需求说明等辅助信息  
**最后更新:** 2025-11-09

---

## 📋 目录

1. [系统架构设计](#系统架构设计)
2. [数据库设计](#数据库设计)
3. [接口设计规范](#接口设计规范)
4. [项目需求说明](#项目需求说明)
5. [技术选型说明](#技术选型说明)
6. [历史文档索引](#历史文档索引)

---

## 系统架构设计

### 整体架构

系统采用前后端分离的设计模式，通过 REST API 进行通信。

```text
用户层 (PC Web / Mobile Web)
        ↓ HTTPS
前端层 (Vue3 + TypeScript)
        ↓ REST API
网关层 (Nginx / Spring Cloud Gateway) [可选]
        ↓
后端层 (Spring Boot)
        ↓
数据层 (MySQL + Redis + OSS)
```

### 前端架构

```text
seu-airline-vue/
├── src/
│   ├── api/           # API 接口层 (按模块划分)
│   ├── components/    # 公共组件 (通用组件、布局组件)
│   ├── router/        # 路由配置
│   ├── stores/        # 状态管理 (按模块划分)
│   ├── types/         # TypeScript 类型定义
│   ├── utils/         # 工具函数
│   ├── views/         # 页面级组件 (按用户端/管理端划分)
│   ├── App.vue        # 根组件
│   └── main.ts        # 入口文件
```

### 后端架构

```java
seu-airline-backend/
├── src/main/java/com/seu/airline/
│   ├── controller/    # 控制器层: 接收请求，调用服务
│   ├── service/       # 服务层: 实现核心业务逻辑
│   ├── repository/    # 数据访问层: 与数据库交互
│   ├── entity/        # 数据库实体类
│   ├── dto/           # 数据传输对象
│   ├── security/      # 安全认证 (Spring Security + JWT)
│   ├── exception/     # 全局异常处理
│   └── util/          # 工具类
```

---

## 数据库设计

### 用户表 (user)

```sql
CREATE TABLE `user` (
  `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `username` VARCHAR(50) UNIQUE NOT NULL,
  `password` VARCHAR(255) NOT NULL,
  `email` VARCHAR(100),
  `phone` VARCHAR(20),
  `real_name` VARCHAR(50),
  `id_card` VARCHAR(18),
  `avatar` VARCHAR(255),
  `member_level` TINYINT DEFAULT 1,
  `points` INT DEFAULT 0,
  `status` TINYINT DEFAULT 1 COMMENT '1:正常 0:冻结',
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP,
  `update_time` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### 航班表 (flight)

```sql
CREATE TABLE `flight` (
  `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `flight_no` VARCHAR(20) NOT NULL,
  `airline` VARCHAR(50) NOT NULL,
  `departure_airport` VARCHAR(10) NOT NULL,
  `arrival_airport` VARCHAR(10) NOT NULL,
  `departure_time` DATETIME NOT NULL,
  `arrival_time` DATETIME NOT NULL,
  `economy_price` DECIMAL(10,2),
  `business_price` DECIMAL(10,2),
  `first_price` DECIMAL(10,2),
  `economy_seats` INT DEFAULT 0,
  `business_seats` INT DEFAULT 0,
  `first_seats` INT DEFAULT 0,
  `status` TINYINT DEFAULT 1 COMMENT '1:正常 2:延误 3:取消',
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP,
  `update_time` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### 订单表 (order)

```sql
CREATE TABLE `order` (
  `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `order_no` VARCHAR(32) UNIQUE NOT NULL,
  `user_id` BIGINT NOT NULL,
  `flight_id` BIGINT NOT NULL,
  `total_price` DECIMAL(10,2) NOT NULL,
  `status` TINYINT DEFAULT 1 COMMENT '1:待支付 2:已支付 3:已取消 4:已退款',
  `contact_name` VARCHAR(50),
  `contact_phone` VARCHAR(20),
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP,
  `pay_time` DATETIME,
  FOREIGN KEY (user_id) REFERENCES user(id),
  FOREIGN KEY (flight_id) REFERENCES flight(id)
);
```

### 订单乘客表 (order_passenger)

```sql
CREATE TABLE `order_passenger` (
  `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `order_id` BIGINT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `id_card` VARCHAR(18) NOT NULL,
  `passenger_type` TINYINT DEFAULT 1 COMMENT '1:成人 2:儿童 3:婴儿',
  `seat_no` VARCHAR(10),
  FOREIGN KEY (order_id) REFERENCES `order`(id)
);
```

### 机场表 (airport)

```sql
CREATE TABLE `airport` (
  `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `code` VARCHAR(10) UNIQUE NOT NULL,
  `name` VARCHAR(100) NOT NULL,
  `city` VARCHAR(50) NOT NULL,
  `country` VARCHAR(50) DEFAULT '中国',
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### 消息表 (message)

```sql
CREATE TABLE `message` (
  `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `user_id` BIGINT NOT NULL,
  `type` VARCHAR(20) NOT NULL COMMENT 'system/order/promotion',
  `title` VARCHAR(100) NOT NULL,
  `content` TEXT,
  `is_read` TINYINT DEFAULT 0,
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES user(id)
);
```

---

## 接口设计规范

### RESTful API 规范

- **请求方法:** 使用 `GET`, `POST`, `PUT`, `DELETE` 等标准 HTTP 方法
- **URL 命名:** 资源使用名词复数，如 `/api/users`, `/api/orders`
- **版本控制:** 可在URL中包含版本号，如 `/api/v1/users`

### 统一响应格式

**成功响应:**
```json
{
  "code": 200,
  "message": "success",
  "success": true,
  "data": {
    "list": [],
    "total": 100
  }
}
```

**失败响应:**
```json
{
  "code": 400,
  "message": "无效的请求参数",
  "success": false,
  "data": null
}
```

### 核心接口列表

| 模块     | 接口路径                 | 方法   | 说明             |
| -------- | ------------------------ | ------ | ---------------- |
| **认证** | `/api/auth/register`     | `POST` | 用户注册         |
|          | `/api/auth/login`        | `POST` | 用户登录         |
|          | `/api/auth/logout`       | `POST` | 用户登出         |
| **航班** | `/api/flight/search`     | `GET`  | 搜索航班         |
|          | `/api/flight/{id}`       | `GET`  | 获取航班详情     |
|          | `/api/airport/list`      | `GET`  | 获取机场列表     |
| **订单** | `/api/orders`            | `POST` | 创建订单         |
|          | `/api/orders`            | `GET`  | 获取用户订单列表 |
|          | `/api/orders/{id}`       | `GET`  | 获取订单详情     |
|          | `/api/orders/{id}/cancel`| `PUT`  | 取消订单         |
|          | `/api/orders/{id}/pay`   | `POST` | 支付订单         |
| **用户** | `/api/user/profile`      | `GET`  | 获取当前用户信息 |
|          | `/api/user/profile`      | `PUT`  | 更新用户信息     |
|          | `/api/user/avatar`       | `POST` | 上传头像         |
|          | `/api/user/passengers`   | `GET`  | 获取常用旅客     |
|          | `/api/user/passengers`   | `POST` | 添加常用旅客     |
| **消息** | `/api/messages`          | `GET`  | 获取消息列表     |
|          | `/api/messages/{id}/read`| `PUT`  | 标记消息已读     |

---

## 项目需求说明

### 核心功能需求

#### 1. 用户端功能

**1.1 用户认证**
- 用户注册（邮箱/手机号）
- 用户登录（用户名/邮箱/手机号）
- 密码找回
- 第三方登录（微信/支付宝）[可选]

**1.2 航班查询**
- 单程/往返航班搜索
- 多条件筛选（价格/时间/航司/舱位）
- 航班排序（价格/时间/时长）
- 航班详情查看

**1.3 航班预订**
- 乘客信息填写
- 常用旅客快速选择
- 附加服务选择（行李/餐食/保险）
- 座位选择
- 价格明细展示

**1.4 订单管理**
- 订单创建
- 订单支付（支付宝/微信/银行卡）
- 订单查询（状态筛选/搜索）
- 订单详情查看
- 订单取消
- 订单退票/改签

**1.5 个人中心**
- 个人信息管理
- 头像上传
- 常用旅客管理
- 账号安全设置
- 积分/会员等级展示

**1.6 消息通知**
- 系统通知
- 订单消息
- 活动推广
- 消息已读/未读状态

**1.7 帮助中心**
- FAQ常见问题
- 搜索功能
- 政策条款
- AI智能客服
- 工单系统

#### 2. 管理端功能

**2.1 系统概览**
- 关键指标展示
- 数据可视化图表
- 实时数据更新
- 快捷操作入口

**2.2 航班管理**
- 航班信息CRUD
- 航班状态管理
- 批量导入/导出
- 航班复制功能

**2.3 订单管理**
- 订单列表查询
- 订单详情查看
- 订单状态修改
- 退款审核
- 订单统计报表

**2.4 用户管理**
- 用户信息查询
- 用户状态管理
- 用户权限管理
- 用户统计分析

**2.5 系统管理**
- 管理员账户管理
- 角色权限管理
- 系统日志查看
- 系统设置

### 非功能性需求

**性能要求**
- 页面加载时间 < 2秒
- API响应时间 < 500ms
- 支持1000+并发用户

**安全要求**
- HTTPS加密传输
- JWT Token认证
- 密码加密存储
- SQL注入防护
- XSS攻击防护

**可用性要求**
- 系统可用性 > 99%
- 支持主流浏览器
- 响应式设计
- 良好的用户体验

---

## 技术选型说明

### 前端技术栈

**核心框架**
- **Vue 3:** 渐进式JavaScript框架，性能优秀
- **TypeScript:** 类型安全，提高代码质量
- **Vite:** 快速的开发构建工具

**状态管理**
- **Pinia:** Vue 3官方推荐的状态管理库

**路由管理**
- **Vue Router:** Vue官方路由管理器

**UI框架**
- **Tailwind CSS:** 实用优先的CSS框架
- **Element Plus:** 管理端UI组件库

**工具库**
- **Axios:** HTTP客户端
- **Day.js:** 日期处理
- **Lodash:** 工具函数库

### 后端技术栈

**核心框架**
- **Spring Boot:** Java企业级应用框架
- **Spring Security:** 安全认证框架
- **MyBatis Plus:** ORM框架

**数据库**
- **MySQL:** 关系型数据库
- **Redis:** 缓存数据库

**其他**
- **JWT:** Token认证
- **WebSocket:** 实时通信
- **OSS:** 对象存储服务

---

## 历史文档索引

### 开发计划文档
- `dev-plan-1010.md` - 2025-10-10开发计划
- `dev-plan-1029.md` - 2025-10-29开发计划
- `dev-plan-1103.md` - 2025-11-03开发计划（消息系统）
- `dev-plan-1109.md` - 2025-11-09开发计划（最新）
- `full-dev-plan.md` - 前后端开发总计划

### 开发进度文档
- `dev-progress-1023.md` - 2025-10-23开发进度
- `dev-progress-1106.md` - 2025-11-06开发进度
- `dev-progress-message-1103.md` - 消息系统开发进度
- `final-progress-report.md` - 最终进度报告

### 开发总结文档
- `summary-1023.md` - 2025-10-23开发总结
- `dev-summary-1106-final.md` - 2025-11-06最终总结
- `dev-summary-and-plan-1106.md` - 总结与计划
- `order-management-dev-summary.md` - 订单管理开发总结
- `user-center-dev-summary.md` - 用户中心开发总结
- `help-center-dev-summary.md` - 帮助中心开发总结

### 功能开发文档
- `USER-CENTER-MODULE.md` - 用户中心模块设计
- `frequent-passenger-feature.md` - 常用旅客功能
- `order-components-usage.md` - 订单组件使用说明

### 调试与修复文档
- `AIRPORT-LOADING-DEBUG.md` - 机场数据加载调试
- `API-CLIENT-FIX.md` - API客户端修复
- `API-PATH-FIX.md` - API路径修复
- `COMPLETE-MOCK-SOLUTION.md` - Mock方案完整说明
- `CUSTOM-MOCK-SOLUTION.md` - 自定义Mock方案
- `DEBUG-AIRPORT-API.md` - 机场API调试
- `ERRORS-FIXED.md` - 错误修复总结
- `MOCK-API-FIX.md` - Mock API修复
- `MOCK-API-SWITCH-GUIDE.md` - Mock API切换指南
- `MOCK-NOT-WORKING-FIX.md` - Mock不工作修复
- `NAVIGATION-OPTIMIZATION.md` - 导航优化
- `PAYMENT-ERROR-DEBUG.md` - 支付错误调试
- `PAYMENT-FIXED.md` - 支付问题修复
- `PAYMENT-FLOW-FIX.md` - 支付流程修复
- `QUICK-FIX-SUMMARY.md` - 快速修复总结
- `ROUTE-FIX.md` - 路由修复
- `SEAT-BOOKING-FIX.md` - 座位预订修复

### 其他文档
- `README.md` - 文档中心索引
- `TESTING-GUIDE.md` - 测试指南
- `module-design.md` - 模块设计文档
- `requirement.md` - 需求规格说明
- `page-completion-status.md` - 页面完成状态
- `project-progress-update.md` - 项目进度更新

---

## 📝 文档使用说明

### 新成员快速上手

**第1步:** 阅读核心文档
- `开发计划.md` - 了解当前开发任务
- `开发记录.md` - 了解项目进展
- `调试说明.md` - 学习调试方法

**第2步:** 理解系统架构
- 查看本文档的"系统架构设计"部分
- 理解前后端分离架构
- 了解技术选型

**第3步:** 配置开发环境
- 参考`调试说明.md`配置环境
- 启动Mock API进行开发

**第4步:** 开始开发
- 查看`开发计划.md`了解待开发任务
- 参考历史文档了解已完成功能
- 遵循代码规范进行开发

### 文档维护原则

1. **及时更新:** 功能变更后及时更新文档
2. **准确性:** 确保文档与代码一致
3. **可读性:** 使用清晰的语言和示例
4. **版本控制:** 使用Git管理文档变更

---

## 🔗 相关资源

### 技术文档
- [Vue3 官方文档](https://cn.vuejs.org/)
- [TypeScript 文档](https://www.typescriptlang.org/docs/)
- [Tailwind CSS 文档](https://tailwindcss.com/docs)
- [Spring Boot 文档](https://spring.io/projects/spring-boot)

### 项目仓库
- 前端项目: `seu-airline-vue/`
- 后端项目: `seu-airline-backend/`
- HTML原型: `SEUAirline.github.io/`

---

**文档维护者:** SEUAirline 开发团队  
**最后更新:** 2025-11-09  
**文档版本:** v1.0
